# Обработка ошибок и исключения в C#

В данном модуле детально изучаются механизмы обнаружения, обработки и генерации ошибок в процессе выполнения программ: конструкции try-catch-finally, виды исключений, создание пользовательских Exception-классов и практика отладки кода.

## Теоретический материал

### Основы обработки ошибок

Любая программа потенциально может столкнуться с ошибкой: недопустимым вводом пользователя, отсутствием файла, делением на ноль и др. Для реагирования на такие ситуации в C# используется система исключений.

### try-catch-finally

- `try` — блок, внутри которого могут возникнуть исключения.
- `catch` — обработчик исключения, перехватывает тип ошибки.
- `finally` — выполняется всегда, независимо от наличия ошибки (например, для освобождения ресурсов).

```csharp
try {
    int x = 10, y = 0;
    int z = x / y; // ошибка деления на ноль
}
catch (DivideByZeroException ex) {
    Console.WriteLine($"Ошибка: {ex.Message}");
}
finally {
    Console.WriteLine("Операция завершена");
}
```

### Стандартные и пользовательские исключения

- Стандартные: ArgumentNullException, InvalidOperationException, FileNotFoundException и др.
- Создание пользовательских:
```csharp
public class AgeException : Exception {
    public AgeException(string message) : base(message) {}
}

void CheckAge(int age) {
    if (age < 18)
        throw new AgeException("Возраст должен быть не менее 18");
}
try {
    CheckAge(15);
}
catch (AgeException ex) {
    Console.WriteLine(ex.Message);
}
```

### Практика отладки
- Точки остановки в Visual Studio позволяют анализировать состояние программы.
- Используйте просмотр стека вызовов, локальные и глобальные переменные для поиска причины.
- Логируйте ключевые операции и ошибки.

## Практические рекомендации
- Обрабатывайте только те исключения, которые реально можно устранить.
- Не скрывайте ошибки: всегда выводите пользователю или в логи причину сбоя.
- Не злоупотребляйте широким catch (Exception): уточняйте тип исключения.

## Практические задания
1. Реализуйте обработку деления на ноль с выводом сообщения об ошибке.
2. Проверьте чтение несуществующего файла, обработайте FileNotFoundException.
3. Создайте пользовательское исключение для проверки правильности Email.
4. Установите точку останова в методе и опишите порядок действий для отладки.

## Видеоуроки и документация
- Microsoft Docs: https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/exceptions/
- Практика отладки: https://metanit.com/sharp/tutorial/4.9.php

Грамотная обработка ошибок делает код устойчивым и безопасным для пользователя.