# Делегаты и события в C#

В этом модуле рассматриваются фундаментальные механизмы организации обратных вызовов, событийной архитектуры и динамического связывания функций в .NET: делегаты, лямбда-выражения и события.

## Теория делегатов

Делегат — это тип, который представляет ссылки на методы с определённой сигнатурой. Используется для обратных вызовов (callback), построения событий, передачи поведения как параметра.

```csharp
public delegate void Notify(string msg);

void ShowMessage(string s) { Console.WriteLine($"Сообщение: {s}"); }

Notify del = ShowMessage;
del("Тест");
```

## Лямбда-выражения и анонимные методы

Лямбда-выражения — компактная форма определения делегата:
```csharp
Func<int, int, int> sum = (x, y) => x + y;
int result = sum(3, 4); // 7
```

Анонимные методы позволяют создавать делегаты "на лету":
```csharp
Action<string> print = delegate(string s) {
    Console.WriteLine(s);
};
print("Привет!");
```

## События

События позволяют реализовать реакцию на действия пользователя, изменения состояний и т.д.
- Событие объявляется через ключевое слово `event` и делегат.

```csharp
class Account {
    public delegate void AccountHandler(string message);
    public event AccountHandler Notify;
    public void Put(int sum) {
        // ...
        Notify?.Invoke($"Сумма {sum} внесена на счет");
    }
}
Account acc = new Account();
acc.Notify += ShowMessage;
```

## Практические рекомендации
- Используйте делегаты для передачи поведения, событий — для раздельной архитектуры.
- Комментируйте сигнатуры делегатов и события для поддержки и расширения приложений.
- Лямбда-выражения упрощают код, делая его короче и читаемее.

## Практические задания
1. Определите делегат, который вычисляет максимальное значение двух чисел, и используйте его.
2. Создайте событие для класса Sensor, реагирующее на превышение лимита температуры.
3. Преобразуйте цепочку методов в список делегатов (MulticastDelegate).

## Ресурсы для изучения
- Microsoft Docs: https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/delegates/
- Видео по событиям: https://metanit.com/sharp/tutorial/3.19.php
